<!DOCTYPE html>
<html lang="ja">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>乗換プラン</title>
   <style>
       body {
           font-family: Arial, sans-serif;
           padding: 20px;
           max-width: 480px; /* iPhone用に最大幅を設定 */
           margin: 0 auto;
       }
       h1 {
           font-size: 18px; /* 「乗換プラン」の文字を小さく */
           text-align: center;
       }
       h2 {
           font-size: 16px; /* 1日目、2日目などの文字サイズ */
       }
       .trip-day {
           margin-top: 30px;
           border: 1px solid #ccc;
           padding: 15px;
           border-radius: 5px;
       }
       .move {
           margin-bottom: 15px;
       }
       .transfer {
           margin-left: 20px;
       }
       input {
           width: 100%; /* 入力フィールドを画面幅に対応させる */
           margin-bottom: 10px;
           padding: 8px;
           font-size: 14px;
       }
       button {
           margin-top: 10px;
           padding: 8px 12px;
           font-size: 14px;
       }
   </style>
</head>
<body>
   <h1>乗換プラン</h1>

   <div class="trip-day" id="day1">
       <h2>1日目</h2>
       <div class="move" id="move1_day1">
           <input type="text" placeholder="出発駅" />
           <input type="datetime-local" placeholder="出発日時" />
           <input type="text" placeholder="路線名" />
           <input type="text" placeholder="出発何番線" />
           <input type="text" placeholder="到着駅" />
           <input type="datetime-local" placeholder="到着日時" />
           <input type="text" placeholder="到着時間" />
           <input type="text" placeholder="料金" />
           <button onclick="removeMove('move1_day1')">移動を削除</button>
       </div>
       <button onclick="addMove('day1')">移動を追加</button>
   </div>

   <div class="trip-day" id="day2">
       <h2>2日目</h2>
       <div class="move" id="move1_day2">
           <input type="text" placeholder="出発駅" />
           <input type="datetime-local" placeholder="出発日時" />
           <input type="text" placeholder="路線名" />
           <input type="text" placeholder="出発何番線" />
           <input type="text" placeholder="到着駅" />
           <input type="datetime-local" placeholder="到着日時" />
           <input type="text" placeholder="到着時間" />
           <input type="text" placeholder="料金" />
           <button onclick="removeMove('move1_day2')">移動を削除</button>
       </div>
       <button onclick="addMove('day2')">移動を追加</button>
   </div>

   <div class="trip-day" id="day3">
       <h2>3日目</h2>
       <div class="move" id="move1_day3">
           <input type="text" placeholder="出発駅" />
           <input type="datetime-local" placeholder="出発日時" />
           <input type="text" placeholder="路線名" />
           <input type="text" placeholder="出発何番線" />
           <input type="text" placeholder="到着駅" />
           <input type="datetime-local" placeholder="到着日時" />
           <input type="text" placeholder="到着時間" />
           <input type="text" placeholder="料金" />
           <button onclick="removeMove('move1_day3')">移動を削除</button>
       </div>
       <button onclick="addMove('day3')">移動を追加</button>
   </div>

   <button onclick="saveData()">データを保存</button>
   <button onclick="loadData()">データを読み込む</button>

   <script>
       function addMove(day) {
           const dayDiv = document.getElementById(day);
           const moveCount = dayDiv.getElementsByClassName('move').length + 1;
           if (moveCount <= 20) {
               const newMove = document.createElement('div');
               newMove.classList.add('move');
               newMove.id = `move${moveCount}_day${day.charAt(day.length - 1)}`;
               newMove.innerHTML = `
                   <input type="text" placeholder="出発駅" />
                   <input type="datetime-local" placeholder="出発日時" />
                   <input type="text" placeholder="路線名" />
                   <input type="text" placeholder="出発何番線" />
                   <input type="text" placeholder="到着駅" />
                   <input type="datetime-local" placeholder="到着日時" />
                   <input type="text" placeholder="到着時間" />
                   <input type="text" placeholder="料金" />
                   <button onclick="removeMove('${newMove.id}')">移動を削除</button>
               `;
               dayDiv.appendChild(newMove);
           } else {
               alert("1日あたりの移動は最大20個までです。");
           }
       }

       function removeMove(moveId) {
           const move = document.getElementById(moveId);
           if (move) {
               move.remove();
           }
       }

       function saveData() {
           const data = {
               day1: getDayData('day1'),
               day2: getDayData('day2'),
               day3: getDayData('day3')
           };
           localStorage.setItem('tripData', JSON.stringify(data));
           alert("データが保存されました。");
       }

       function loadData() {
           const data = JSON.parse(localStorage.getItem('tripData'));
           if (data) {
               setDayData('day1', data.day1);
               setDayData('day2', data.day2);
               setDayData('day3', data.day3);
               alert("データが読み込まれました。");
           } else {
               alert("保存されたデータがありません。");
           }
       }

       function getDayData(dayId) {
           const dayDiv = document.getElementById(dayId);
           const moves = dayDiv.getElementsByClassName('move');
           const dayData = [];
           for (let move of moves) {
               const inputs = move.getElementsByTagName('input');
               const moveData = [];
               for (let input of inputs) {
                   moveData.push(input.value);
               }
               dayData.push(moveData);
           }
           return dayData;
       }

       function setDayData(dayId, dayData) {
           const dayDiv = document.getElementById(dayId);
           dayDiv.innerHTML = ''; // 既存のデータをクリア
           for (let i = 0; i < dayData.length; i++) {
               const moveData = dayData[i];
               const newMove = document.createElement('div');
               newMove.classList.add('move');
               newMove.id = `move${i + 1}_${dayId}`;
               newMove.innerHTML = `
                   <input type="text" value="${moveData[0]}" placeholder="出発駅" />
                   <input type="datetime-local" value="${moveData[1]}" placeholder="出発日時" />
                   <input type="text" value="${moveData[2]}" placeholder="路線名" />
                   <input type="text" value="${moveData[3]}" placeholder="出発何番線" />
                   <input type="text" value="${moveData[4]}" placeholder="到着駅" />
                   <input type="datetime-local" value="${moveData[5]}" placeholder="到着日時" />
                   <input type="text" value="${moveData[6]}" placeholder="到着時間" />
                   <input type="text" value="${moveData[7]}" placeholder="料金" />
                   <button onclick="removeMove('${newMove.id}')">移動を削除</button>
               `;
               dayDiv.appendChild(newMove);
           }
       }
   </script>
</body>
</html>